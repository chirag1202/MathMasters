# MathMasters

[![Build and Commit APK](https://github.com/chirag1202/MathMasters/actions/workflows/build-apk.yml/badge.svg)](https://github.com/chirag1202/MathMasters/actions/workflows/build-apk.yml)

A Flutter-based math learning application for kids.

## Project Structure

- `mathmasters/` - Main Flutter application directory
- `releases/` - APK releases generated by CI/CD pipeline
- `.github/workflows/` - GitHub Actions CI/CD configuration

## CI/CD Pipeline

This repository includes an automated CI/CD pipeline that builds and commits APK files on every merge to the main/master branch.

### How It Works

1. **Trigger**: The pipeline runs when:
   - Code is pushed to `main` or `master` branch
   - A pull request is merged into `main` or `master` branch

2. **Build Process**:
   - Sets up Java 17 and Flutter 3.24.0
   - Installs project dependencies
   - Builds release APKs split per ABI (architecture) for optimal app size

3. **APK Storage**:
   - APKs are stored in the `releases/` directory
   - Multiple APK files are created per build for different architectures:
     - `app-armeabi-v7a-release-<timestamp>.apk` / `app-armeabi-v7a-release-latest.apk` (32-bit ARM)
     - `app-arm64-v8a-release-<timestamp>.apk` / `app-arm64-v8a-release-latest.apk` (64-bit ARM)
     - `app-x86_64-release-<timestamp>.apk` / `app-x86_64-release-latest.apk` (64-bit x86)

4. **Auto-commit**: The pipeline automatically commits the generated APK files back to the repository

### Getting the Latest APK

Download the appropriate APK from the `releases/` directory based on your device architecture:
- `releases/app-arm64-v8a-release-latest.apk` - Most recent build for 64-bit ARM devices (most modern Android phones)
- `releases/app-armeabi-v7a-release-latest.apk` - Most recent build for 32-bit ARM devices (older Android phones)
- `releases/app-x86_64-release-latest.apk` - Most recent build for 64-bit x86 devices (Android emulators/tablets)

### Local Development

For local development and testing, see [mathmasters/README.md](mathmasters/README.md).

## Building Manually

To build the APK manually:

```bash
cd mathmasters
flutter pub get
# Build split APKs per architecture (recommended for smaller file sizes)
flutter build apk --split-per-abi --release
# Or build a universal APK (larger file size, works on all architectures)
flutter build apk --release
```

Split APKs will be located at:
- `mathmasters/build/app/outputs/flutter-apk/app-armeabi-v7a-release.apk` (32-bit ARM)
- `mathmasters/build/app/outputs/flutter-apk/app-arm64-v8a-release.apk` (64-bit ARM)
- `mathmasters/build/app/outputs/flutter-apk/app-x86_64-release.apk` (64-bit x86)

Universal APK will be located at: `mathmasters/build/app/outputs/flutter-apk/app-release.apk`
